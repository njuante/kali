#################################
#    PICOM - eriic1002 Style    #
#    VM-Optimized + Polybar OK  #
#################################

# ═══════════════════════════════════════════════════
# CORNERS - Bordes redondeados
# ═══════════════════════════════════════════════════
corner-radius = 20;
rounded-corners-exclude = [
    "window_type = 'desktop'",
    "window_type = 'dock'",
    "class_g = 'Polybar'"
];

round-borders = 20;
round-borders-exclude = [];
round-borders-rule = [];

# ═══════════════════════════════════════════════════
# SHADOWS - Sombras suaves
# ═══════════════════════════════════════════════════
shadow = true;
shadow-radius = 15;
shadow-opacity = 0.5;
shadow-offset-x = -15;
shadow-offset-y = -15;
shadow-red = 0.18;
shadow-green = 0.19;
shadow-blue = 0.20;

shadow-exclude = [
    "class_g = 'firefox' && argb",
    "class_g = 'Polybar'",
    "name = 'Polybar'",
    "window_type = 'dock'",
    "window_type = 'desktop'"
];

# ═══════════════════════════════════════════════════
# FADING - Transiciones suaves
# ═══════════════════════════════════════════════════
fading = true;
fade-in-step = 0.1;
fade-out-step = 0.1;

fade-exclude = [
    "class_g = 'Polybar'",
    "name = 'Polybar'",
    "window_type = 'dock'"
];

# ═══════════════════════════════════════════════════
# OPACITY - Transparencia
# ═══════════════════════════════════════════════════
inactive-opacity = 1.0;
frame-opacity = 1.0;
inactive-opacity-override = false;
active-opacity = 1.0;

focus-exclude = [
    "class_g = 'Cairo-clock'",
    "class_g = 'Polybar'",
    "name = 'Polybar'",
    "window_type = 'dock'"
];

opacity-rule = [
    "100:class_g = 'Polybar'",
    "100:window_type = 'dock'"
];

# ═══════════════════════════════════════════════════
# BLUR - Difuminado (desactivado para VM)
# ═══════════════════════════════════════════════════
# blur-method = "dual_kawase"
# blur-size = 2
# blur-strength = 3
# blur-background = true
blur-background = false;

# ═══════════════════════════════════════════════════
# GENERAL - Configuración del compositor
# ═══════════════════════════════════════════════════
# IMPORTANTE: xrender para VMs, glx para hardware nativo
backend = "xrender";
# Para hardware nativo usar:
# backend = "glx";

vsync = true;
mark-wmwin-focused = true;

# CRÍTICO: false para que polybar no desaparezca
mark-ovredir-focused = false;

detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;

# IMPORTANTE: false para evitar problemas con polybar
unredir-if-possible = false;

use-damage = false;
log-level = "warn";

# ═══════════════════════════════════════════════════
# WINTYPES - Configuración por tipo de ventana
# ═══════════════════════════════════════════════════
wintypes:
{
    tooltip = { 
        fade = true; 
        shadow = true; 
        shadow-radius = 0; 
        shadow-opacity = 1.0; 
        shadow-offset-x = -20; 
        shadow-offset-y = -20; 
        opacity = 0.8; 
        full-shadow = true; 
    };
    dnd = { shadow = false; };
    dropdown_menu = { shadow = false; };
    popup_menu = { shadow = false; };
    utility = { shadow = false; };
    dock = { 
        shadow = false; 
        fade = false;
        opacity = 1.0;
        focus = true;
    };
};
